micronaut:
  application:
    name: vardef
  security:
    token:
      jwt:
        claims:
          keys:
            dapla: dapla
            dapla-groups: groups
            dapla-teams: teams
            username: preferred_username
          values:
            dapla-lab-audience: onyxia-api
    intercept-url-map:
      # TODO Allow access to everything until we have specific rules on endpoints
      - pattern: /**
        access:
          - isAnonymous()
  router:
    static-resources:
      swagger:
        paths: classpath:META-INF/swagger
        mapping: /docs/openapi/**
      swagger-ui:
        paths: classpath:META-INF/swagger/views/swagger-ui
        mapping: /docs/swagger/**
      redoc:
        paths: classpath:META-INF/swagger/views/redoc
        mapping: /docs/redoc/**
  openapi:
    property:
      naming:
        strategy: SNAKE_CASE
    views:
      spec: |
        mapping.path=docs/openapi,
        swagger-ui.enabled=true,
        swagger-ui.js.url=/docs/swagger/res/,
        swagger-ui.tagsSorter=Function=(a => a),
        redoc.enabled=true,
        redoc.js.url=/docs/redoc/res/,
        redoc.sort-tags-alphabetically=false,
  serde:
    deserialization:
      ignore-unknown: false
      strict-nullable: true
    serialization:
      inclusion: always

  caches:
    classifications:
      maximumSize: 3600
    codes:
      maximumSize: 3600

  server:
    netty:
      access-logger:
        enabled: true
        exclusions:
          - /health
          - /metrics

  http:
    services:
      klass:
        url: https://data.ssb.no/api/klass/v1/
        codes-at: 2024-08-01
      vardok:
        url: https://www.ssb.no/a/xml/metadata/conceptvariable/vardok/

  klass-web:
    url:
      en: https://www.ssb.no/en/klass
      nb: https://www.ssb.no/klass

klass:
  codes-at: 2024-08-01

jackson:
  xml:
    enabled: true
