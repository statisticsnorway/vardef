# Start server
# Make sure to add a token and an active group, either local .env or as variable
@USER_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTSXVpVEZSaGhwV1NyUkd5NXdac2RVQjktV3FERE1QYlIyUFBsQVQweVJNIn0.eyJleHAiOjE3MzMyNjY5OTAsImlhdCI6MTczMzIzMDk5MCwiYXV0aF90aW1lIjoxNzMzMjIwMTEyLCJqdGkiOiI1OGI2Y2M1Zi0zYWY5LTQ3YTEtOGI0ZC1kMWRiODdjNmY4ODgiLCJpc3MiOiJodHRwczovL2F1dGgudGVzdC5zc2Iubm8vcmVhbG1zL3NzYiIsImF1ZCI6WyJvbnl4aWEtYXBpIiwiYnJva2VyIiwiYWNjb3VudCJdLCJzdWIiOiI1NThmZGM3My0wZDU0LTQ4M2UtYjY0OC1lYzY5N2UxZTJlMGIiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJvbnl4aWEtYXBpIiwic2Vzc2lvbl9zdGF0ZSI6ImE2MDA0NmI5LTJlZTMtNGUwYy1hMGQxLTY0YmNiNTA4N2UwMiIsImFjciI6IjAiLCJhbGxvd2VkLW9yaWdpbnMiOlsiaHR0cHM6Ly9sYWIuZGFwbGEtdGVzdC5zc2Iubm8iXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iLCJkZWZhdWx0LXJvbGVzLXNzYiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImJyb2tlciI6eyJyb2xlcyI6WyJyZWFkLXRva2VuIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwcm9maWxlIiwic2lkIjoiYTYwMDQ2YjktMmVlMy00ZTBjLWEwZDEtNjRiY2I1MDg3ZTAyIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImRhcGxhIjp7InRlYW1zIjpbImRhcGxhLWZlbGxlcyIsInBsYXktb2JyLWIiLCJwbGF5LWVuaGpvZXJuLWEiLCJkYXBsYS1tZXRhZGF0YSIsImRhcGxhLXBsYXRmb3JtIiwiaGFjay1mbnJsZXRpbmciXSwiZ3JvdXBzIjpbImhhY2stZm5ybGV0aW5nLWRhdGEtYWRtaW5zIiwicGxheS1vYnItYi1kZXZlbG9wZXJzIiwicGxheS1lbmhqb2Vybi1hLWRldmVsb3BlcnMiLCJoYWNrLWZucmxldGluZy1kZXZlbG9wZXJzIiwiZGFwbGEtcGxhdGZvcm0tZGV2ZWxvcGVycyIsImRhcGxhLWZlbGxlcy1kYXRhLWFkbWlucyIsImRhcGxhLWZlbGxlcy1kZXZlbG9wZXJzIiwiZGFwbGEtbWV0YWRhdGEtZGV2ZWxvcGVycyJdfSwibmFtZSI6IkthcmwgSsO4cmdlbiBSdXNzbmVzIiwic2hvcnRfdXNlcm5hbWUiOiJzc2ItcmxqIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicmxqQHNzYi5ubyIsImdpdmVuX25hbWUiOiJLYXJsIErDuHJnZW4iLCJmYW1pbHlfbmFtZSI6IlJ1c3NuZXMiLCJlbWFpbCI6InJsakBzc2Iubm8ifQ.TvCANvgwwCrl76zJzJoQ9fAg6MhRYRaBBVAZpYU1idglitMxZwKAhgvOxtixfZy5lMukZ7tMd8ZnhRJTLJwvzeyTSbagV2HQaeg-AbJMWiKzJYp3S0MKlkjJcR2ytw6IkPfH4C4-MnCodQvHdxwZYyP_31gztSg4mR0sl_ChjniBGOBPfAfH6JtJUMiLL02B7XaFMXydaMjx0hG7-Aq11aozg-VzL7JtDYKPq0SPfNXkFRTynhHgsKZ34g4QgnkdvNHDVFjUwajG2IGaPmYqNt_BZj26RzL8JsoC9e8yICLDvlVTIyeyjSPKAQCkLJiUNZ-rHT2enxSwIC28n-eylg
@ACTIVE_GROUP=dapla-felles-developers
#@USER_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxcWFrV3FDVWwtc2xaVVQ3dkVVemUxSmYxMHZXanFFbWZ0VGNIN0FzQlVzIn0.eyJleHAiOjE3MzMyNTYxODksImlhdCI6MTczMzIyMDE4OSwiYXV0aF90aW1lIjoxNzMzMjIwMTg2LCJqdGkiOiI4ZDI4ODNiNC1mZTY0LTQ5MTYtYTA5Ni1hYmFhZDkyMmJmNzEiLCJpc3MiOiJodHRwczovL2F1dGguc3NiLm5vL3JlYWxtcy9zc2IiLCJhdWQiOlsiZGFwbGEtdGVhbS1hcGkiLCJkYXBsYS1jbGkiLCJicm9rZXIiLCJhY2NvdW50Il0sInN1YiI6IjI5NzU4NDg2LTdlM2UtNDdhNS04ODFjLWFiOWUwNTc2NWMxZiIsInR5cCI6IkJlYXJlciIsImF6cCI6ImRhcGxhLWNsaSIsInNlc3Npb25fc3RhdGUiOiJhOThjYTQzMS0wYmFjLTQ2NWUtYjQxMi00ODZiNWM3YzM1MzYiLCJhY3IiOiIxIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbIm9mZmxpbmVfYWNjZXNzIiwidW1hX2F1dGhvcml6YXRpb24iLCJkZWZhdWx0LXJvbGVzLXNzYiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImJyb2tlciI6eyJyb2xlcyI6WyJyZWFkLXRva2VuIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwic2lkIjoiYTk4Y2E0MzEtMGJhYy00NjVlLWI0MTItNDg2YjVjN2MzNTM2IiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImRhcGxhIjp7InRlYW1zIjpbImRhcGxhLWZlbGxlcyIsInBsYXktb2JyLWIiLCJwbGF5LWVuaGpvZXJuLWEiLCJkYXBsYS1tZXRhZGF0YSIsImRhcGxhLXBsYXRmb3JtIiwiaGFjay1mbnJsZXRpbmciXSwic2VjdGlvbl9jb2RlIjoiNzI0IiwiZ3JvdXBzIjpbImhhY2stZm5ybGV0aW5nLWRhdGEtYWRtaW5zIiwicGxheS1vYnItYi1kZXZlbG9wZXJzIiwicGxheS1lbmhqb2Vybi1hLWRldmVsb3BlcnMiLCJoYWNrLWZucmxldGluZy1kZXZlbG9wZXJzIiwiZGFwbGEtcGxhdGZvcm0tZGV2ZWxvcGVycyIsImRhcGxhLWZlbGxlcy1kYXRhLWFkbWlucyIsImRhcGxhLWZlbGxlcy1kZXZlbG9wZXJzIiwiZGFwbGEtbWV0YWRhdGEtZGV2ZWxvcGVycyJdfSwibmFtZSI6IkthcmwgSsO4cmdlbiBSdXNzbmVzIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicmxqQHNzYi5ubyIsImdpdmVuX25hbWUiOiJLYXJsIErDuHJnZW4iLCJmYW1pbHlfbmFtZSI6IlJ1c3NuZXMiLCJlbWFpbCI6InJsakBzc2Iubm8ifQ.fJdT7y5i7FFRlMrSpfAOB9pLZ78cRlHy_1YaaYQf3OitfFO_DQYrlEpetB_a4BlwSGS_R6oCwfrkTtODu5-QO4R0wN5W4Qe7SqouT2JEVun5XGERpCEdbgZkqEt9A0LmPCBANqBdEMwyjhboeBixyCnJ0Ks8SVgROmioE3JNvjQ1gWNRjn5E9oYI3BF-x2B6VASKlvfqN7dMfY2IHiPXkvQVEsrJiHV2mBl_rwRe2qbh5pmymCE6QP6KxnsLd_YlkKkddKKu7bmO-O825IbL9m0dpFMK2Skyt6ypVkWTTbPh9IymMHkWz-SgZsTEsfH5eifMQrT-LMS-PFCvsdtmiA%


POST http://127.0.0.1:8080/variable-definitions?active_group={{ACTIVE_GROUP}}
Authorization: Bearer {{USER_TOKEN}}
Content-Type: application/json

< ./landbakk.json

> {% client.global.set('variable-definition-id', response.body.id) %}

###
# Can add query value: date_of_validity
GET http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}
Content-Type: application/json
Authorization: Bearer {{USER_TOKEN}}

###
PATCH  http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}?active_group={{ACTIVE_GROUP}}
Authorization: Bearer {{USER_TOKEN}}
Content-Type: application/json

{"variable_status": "PUBLISHED_INTERNAL"}

###
POST http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}/validity-periods?active_group={{ACTIVE_GROUP}}
Authorization: Bearer {{USER_TOKEN}}
Content-Type: application/json

{
  "definition": {
    "en": "Country background is the mothers birth country change.",
    "nb": "For personer født i utlandet er dette mors fødeland endring.",
    "nn": "For personar fødd i utlandet mors fødeland endring."
  },
  "valid_from": "2020-01-01"
}

###
POST http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}/validity-periods?active_group={{ACTIVE_GROUP}}
Authorization: Bearer {{USER_TOKEN}}
Content-Type: application/json

{
  "definition": {
    "en": "Country background is the mothers birth country change 2.",
    "nb": "For personer født i utlandet er dette mors fødeland endring 2.",
    "nn": "For personar fødd i utlandet mors fødeland endring 2 ."
  },
  "valid_from": "1930-01-01"
}

###
POST http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}/validity-periods?active_group={{ACTIVE_GROUP}}
Authorization: Bearer {{USER_TOKEN}}
Content-Type: application/json

{
  "definition": {
    "en": "Country background is the mothers birth country change 3.",
    "nb": "For personer født i utlandet er dette mors fødeland endring 3.",
    "nn": "For personar fødd i utlandet mors fødeland endring 3."
  },
  "valid_from": "2024-01-01"
}

###
POST http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}/patches?active_group={{ACTIVE_GROUP}}
Content-Type: application/json
Authorization: Bearer {{USER_TOKEN}}

{
  "owner": {
    "team": "play-obr-b",
    "groups": [
      "play-obr-b-developers",
      "dapla-felles-developers",
      "play-enhjoern-a-developers"
    ]
  }
}

###
GET http://127.0.0.1:8080/variable-definitions/{{variable-definition-id}}/validity-periods
Accept: application/json
Authorization: Bearer {{USER_TOKEN}}